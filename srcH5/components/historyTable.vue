<template>
    <div class="__tb">
        <div v-show="sortedList && sortedList.length">
            <order-item v-for="v in sortedList" :key="v.orderId" :order="v">
                <span class="status">{{ $t('tradeOrderHistory.table.rowMap.statusMap')[v.status] }}</span>
            </order-item>
        </div>
        <no-data v-show="!sortedList || !sortedList.length"></no-data>
    </div>
    <!-- <wallet-table class="trade-history-table"
                    :headList="headList" :contentList="showList"
                    :clickCell="clickCell">
        <span v-for="(v, i) in showList" :key="i"
                :slot="`${i}sideKeyBefore`" :class="{
                    'buy': v.rawData.side === 0,
                    'sell': v.rawData.side === 1
        }">{{ $t("tradeOrderHistory.side")[v.rawData.side] }}</span>

        <pagination v-if="isShowPage" slot="tableBottom" class="__tb_pagination"
                    :currentPage="currentPage" :toPage="toPage"
                    :totalPage="totalPage"></pagination>
    </wallet-table>
    <confirm v-show="detailConfirm" :list="detailList" :close="close"
                :title="$t('tradeOrderHistory.confirmTable.title')"
                :heads="$t('tradeOrderHistory.confirmTable.heads')">
    </confirm> -->
</template>

<script>
import noData from 'h5Components/noData';
import orderItem from 'h5Components/orderItem';
// import d from 'dayjs';
// import statistics from 'utils/statistics';
// import { orderDetail } from 'services/trade';
// import pagination from 'components/pagination';
// import walletTable from 'components/table/index';
// import confirm from './tradeList';

export default {
    // confirm, walletTable, pagination
    components: { noData, orderItem },
    props: {
        list: {
            type: Array,
            default: () => []
        },
        isShowPage: {
            type: Boolean,
            default: false
        },
        currentPage: null,
        toPage: null,
        totalPage: null
    },
    // data() {
    //     return {
    //         detailData: [],
    //         detailConfirm: false
    //     };
    // },
    computed: {
        sortedList() {
            return this.list.slice(0).sort((a, b) => (b.createTime - a.createTime));
        },
        address() {
            return this.$store.getters.activeAddr;
        }
        // showList() {
        //     const list = [];
        //     this.sortedList.forEach(v => {
        //         list.push({
        //             createTime: this.filterDate(v.createTime),
        //             symbol: `${ v.tradeTokenSymbol }/${ v.quoteTokenSymbol }`,
        //             price: `${ v.price } ${ this.getOriginSymbol(v.quoteTokenSymbol) }`,
        //             quantity: `${ v.quantity } ${ this.getOriginSymbol(v.tradeTokenSymbol) }`,
        //             executedQuantity: `${ v.executedQuantity } ${ this.getOriginSymbol(v.tradeTokenSymbol) }`,
        //             executedPercent: `${ (v.executedPercent * 100).toFixed(2) }%`,
        //             executedAvgPrice: `${ v.executedAvgPrice } ${ this.getOriginSymbol(v.quoteTokenSymbol) }`,
        //             fee: `${ v.fee } ${ this.getOriginSymbol(v.quoteTokenSymbol) }`,
        //             status: this.$t('tradeOrderHistory.table.rowMap.statusMap')[v.status],
        //             operate: this.$t('tradeOrderHistory.table.rowMap.detail'),
        //             rawData: v
        //         });
        //     });
        //     return list;
        // },
        // detailList() {
        //     return Object.keys(this.detailData).map(k => {
        //         const o = this.detailData[k];
        //         return [
        //             d.unix(o.time).format('YYYY-MM-DD HH:mm'),
        //             `${ o.price } ${ this.getOriginSymbol(o.quoteTokenSymbol) }`,
        //             `${ o.quantity } ${ this.getOriginSymbol(o.tradeTokenSymbol) }`,
        //             `${ o.fee } ${ this.getOriginSymbol(o.quoteTokenSymbol) }`,
        //             `${ o.amount } ${ this.getOriginSymbol(o.quoteTokenSymbol) }`
        //         ];
        //     });
        // },
    }
    // methods: {
    //     getOriginSymbol(symbol) {
    //         return symbol.split('-')[0];
    //     },
    //     clickCell(cell, item) {
    //         if (cell === 'operate') {
    //             return this.showDetail(item.rawData);
    //         }
    //     },
    //     filterDate(v) {
    //         return d.unix(v).format('YYYY-MM-DD HH:mm');
    //     },
    //     close() {
    //         this.detailData = [];
    //         this.detailConfirm = false;
    //     },
    //     showDetail(order) {
    //         statistics.event(`H5${ this.$route.name }`, 'orderHistory-detail', this.address || '');

    //         orderDetail({
    //             orderId: order.orderId,
    //             symbol: order.symbol,
    //             offset: 0,
    //             limit: 100
    //         }).then(data => {
    //             this.detailData = (data.trade || []).map(v => {
    //                 v.fee = order.orderId === v.buyerOrderId ? v.buyFee : v.sellFee;
    //                 return v;
    //             });
    //         });

    //         this.detailConfirm = true;
    //     }
    // }
};
</script>

<style lang="scss" scoped>
@import "~h5Assets/scss/vars.scss";

.__tb {
    width: 100%;
    height: 100%;
    overflow: auto;
}
.status {
    font-size: 14px;
    @include font-normal();
    color: rgba(62,74,89,0.45);
    line-height: 18px;
}
</style>
